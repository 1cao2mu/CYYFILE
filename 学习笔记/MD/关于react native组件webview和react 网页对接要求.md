关于React Native的WebView组件和React网页对接须知

1. 单向通信

   RN的webview与原生的webView有性能的差距,react可以给RN传值,但RN无法传值给react.也就是说仅支持单向通信

   通过在webview内部的网页中调用window.postMessage方法时可以触发一个RN的回调方法,通过此方式实现单向通信

2. 监听返回键

   首先,android硬件返回键,可以实现如果不是处于初始页面,返回上一个页面,如果是,关闭此模块.但前提是RN可以监听到页面变化,如果使用div跳转,必须实现路由变化,RN才可监听到,才可以实现上述功能.

   其次,标题栏的左上角返回键,两种实现方式:

   第一:react自行添加实现回退到上个界面功能,当需要关闭此模块时,通过window.postMessage传值,RN接收到特定的字符之后,关闭此模块.

   第二:RN通过在webView外层覆盖一层View,添加一个返回按钮,功能由RN来实现,但这个方法有弊端如下:渲染不同步,编辑时组件滑动容易错位,网页的弹窗无法遮罩返回键.